# Klipper BrickLayers - Example Macros
# Include this file in your printer.cfg: [include macros.cfg]

[gcode_macro BRICK_ON]
description: Enable BrickLayers transformations
gcode:
    BRICK_LAYERS_ENABLE
    M117 BrickLayers ON

[gcode_macro BRICK_OFF]
description: Disable BrickLayers transformations
gcode:
    BRICK_LAYERS_DISABLE
    M117 BrickLayers OFF

[gcode_macro BRICK_STATUS]
description: Show BrickLayers status
gcode:
    BRICK_LAYERS_STATUS

# Start print with BrickLayers (add to your existing START_PRINT macro)
[gcode_macro START_PRINT_BRICK]
description: Example start print macro with BrickLayers
gcode:
    # Your normal start print routine here
    # ...
    
    # Enable BrickLayers after homing/leveling
    BRICK_LAYERS_ENABLE
    M117 Printing with BrickLayers

# End print macro
[gcode_macro END_PRINT_BRICK]
description: Example end print macro
gcode:
    # Disable BrickLayers
    BRICK_LAYERS_DISABLE
    
    # Your normal end print routine here
    # ...

# Quick toggle for testing
[gcode_macro BRICK_TOGGLE]
description: Toggle BrickLayers on/off
variable_brick_enabled: 0
gcode:
    {% if printer["brick_layers"].enabled %}
        BRICK_LAYERS_DISABLE
        SET_GCODE_VARIABLE MACRO=BRICK_TOGGLE VARIABLE=brick_enabled VALUE=0
        M117 BrickLayers OFF
    {% else %}
        BRICK_LAYERS_ENABLE
        SET_GCODE_VARIABLE MACRO=BRICK_TOGGLE VARIABLE=brick_enabled VALUE=1
        M117 BrickLayers ON
    {% endif %}
